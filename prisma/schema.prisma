generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model club {
  clubName                   String               @id @db.VarChar(30)
  website                    String               @db.VarChar(2048)
  match_clubTomatch_awayTeam match[]              @relation("clubTomatch_awayTeam")
  match_clubTomatch_homeTeam match[]              @relation("clubTomatch_homeTeam")
  playerteaminseason         playerteaminseason[]
  stadium                    stadium[]
  user                       user[]
}

model match {
  date                      DateTime           @db.Date
  homeTeam                  String             @db.VarChar(30)
  awayTeam                  String             @db.VarChar(30)
  result                    String             @db.VarChar(10)
  possessionH               Int
  possessionA               Int
  foulH                     Int
  foulA                     Int
  yellowCardsH              Int
  yellowCardsA              Int
  redCardsH                 Int
  redCardsA                 Int
  goalsH                    Int
  goalsA                    Int
  shotH                     Int
  shotA                     Int
  stadiumName               String             @db.VarChar(50)
  season                    String             @db.VarChar(45)
  club_clubTomatch_awayTeam club               @relation("clubTomatch_awayTeam", fields: [awayTeam], references: [clubName], map: "match_ibfk_2")
  club_clubTomatch_homeTeam club               @relation("clubTomatch_homeTeam", fields: [homeTeam], references: [clubName], map: "match_ibfk_1")
  stadium                   stadium            @relation(fields: [stadiumName], references: [stadiumName], map: "match_ibfk_3")
  usermatchreviews          usermatchreviews[]

  @@id([homeTeam, awayTeam, season])
  @@index([awayTeam], map: "awayTeam")
  @@index([stadiumName], map: "stadiumName")
}

model player {
  name        String   @db.VarChar(100)
  dateOfBirth DateTime @db.Date
  nationality String   @db.VarChar(20)
  height      Int?
  weight      Int?
  position    String   @db.VarChar(15)

  @@id([name, dateOfBirth])
}

model playerteaminseason {
  name        String   @db.VarChar(100)
  dateOfBirth DateTime @db.Date
  clubName    String   @db.VarChar(30)
  season      String   @db.VarChar(10)
  club        club     @relation(fields: [clubName], references: [clubName], map: "playerteaminseason_ibfk_1")

  @@id([name, dateOfBirth, season, clubName])
  @@index([clubName], map: "clubName")
}

model stadium {
  stadiumName            String  @id @db.VarChar(50)
  addressName            String? @db.VarChar(100)
  street                 String  @db.VarChar(45)
  city                   String  @db.VarChar(45)
  zipCode                String  @db.VarChar(45)
  capacity               Int
  recordLeagueAttendance Int
  pitchL                 Decimal @db.Decimal(5, 2)
  pitchW                 Decimal @db.Decimal(5, 2)
  buildingDate           Int
  homeClub               String  @db.VarChar(30)
  club                   club    @relation(fields: [homeClub], references: [clubName], onDelete: Cascade, map: "stadium_club")
  match                  match[]

  @@index([homeClub], map: "stadium_club_idx")
}

model user {
  email            String             @id
  password         String?            @db.VarChar(50)
  username         String             @db.VarChar(40)
  age              Int
  gender           String             @db.Char(1)
  birthdate        DateTime           @db.Date
  supportClub      String             @db.VarChar(30)
  club             club               @relation(fields: [supportClub], references: [clubName], map: "user_ibfk_1")
  usermatchreviews usermatchreviews[]

  @@index([supportClub], map: "supportClub")
}

model usermatchreviews {
  email      String
  matchDate  DateTime @db.Date
  homeTeam   String   @db.VarChar(30)
  rating     Int
  textReview String   @db.Text
  awayTeam   String   @db.VarChar(30)
  season     String   @db.VarChar(45)
  user       user     @relation(fields: [email], references: [email], map: "usermatchreviews_ibfk_1")
  match      match    @relation(fields: [homeTeam, awayTeam, season], references: [homeTeam, awayTeam, season], map: "usermatchreviews_ibfk_3")

  @@id([email, homeTeam, awayTeam, season])
  @@index([homeTeam, awayTeam, season], map: "homeTeam")
  @@index([season], map: "season_fk_idx")
  @@index([matchDate], map: "usermatchreviews_ibfk_2_idx")
}
